<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title th:text="${portfolio.title}">포트폴리오 상세</title>
	<link rel="stylesheet" th:href="@{/css/portfolio.css}">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<!-- Noto Sans KR (한글용) -->
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
	<!-- Righteous (영문용) -->
	<link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">

</head>

<body>
	<div class="container">
		<!-- 상단 고정 바 -->
		<header class="topbar">
			<div class="topbar-left">UniLife</div>
			<div class="topbar-right">
				<span class="topbar-date">
					<span th:text="${todayDate}">2025-04-16</span>,
					<span th:text="${dayOfWeek}">수요일</span>
				</span>
				<span class="topbar-user">이유진</span>
			</div>
		</header>

		<h2 th:text="${portfolio.title}">포트폴리오 제목</h2>

		<div class="portfolio-details">
			<p>
				<strong>기간:</strong>
				<span th:text="${#temporals.format(portfolio.startDate, 'yyyy-MM-dd')}"></span>
				~
				<span th:text="${#temporals.format(portfolio.endDate, 'yyyy-MM-dd')}"></span>
			</p>

			<p>
				<strong>등록일:</strong>
				<span th:text="${#temporals.format(portfolio.createdAt, 'yyyy-MM-dd HH:mm')}"></span>
			</p>

			<p>
				<strong>파일:</strong>
				<a th:href="@{'/api/files/download/' + ${portfolio.fileName}}" th:download="${portfolio.fileName}">
					[[${portfolio.fileName}]]
				</a>
				<span class="badge" th:text="${portfolio.fileExtension}"></span>
				<span th:if="${portfolio.fileName == null}">파일 없음</span>
			</p>

			<p>
				<strong>파일 크기:</strong>
				<span th:text="${#numbers.formatDecimal(portfolio.fileSize / 1024, 0, 2)} + ' KB'"></span>
			</p>

			<div th:if="${portfolio.description}">
				<h2>설명</h2>
				<p th:text="${portfolio.description}"></p>
			</div>

			<div
				th:if="${portfolio.fileExtension == '.png' || portfolio.fileExtension == '.jpg' || portfolio.fileExtension == '.jpeg' || portfolio.fileExtension == '.gif'}">
				<h2>미리보기</h2>
				<img th:src="@{'/uploads/' + ${#strings.substringAfterLast(portfolio.filePath, '/')}}" alt="미리보기">
			</div>
		</div>

		<div class="actions">
			<a th:href="@{/portfolios(userId=${portfolio.userId})}" class="btn">목록으로 돌아가기</a>
			<a th:href="@{/portfolios/{id}/delete(id=${portfolio.id}, userId=${portfolio.userId})}" class="btn danger"
				onclick="return confirm('정말 삭제하시겠습니까?');">삭제</a>
		</div>
	</div>
</body>

</html>